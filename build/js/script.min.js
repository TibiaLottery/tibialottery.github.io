function unserialize(t){var e=this,r=function(t){var e=t.charCodeAt(0);return 128>e||e>=160&&255>=e||-1!=[338,339,352,353,376,402,8211,8212,8216,8217,8218,8220,8221,8222,8224,8225,8226,8230,8240,8364,8482].indexOf(e)?0:2048>e?1:2};return error=function(t,r,o,n){throw new e.window[t](r,o,n)},read_until=function(t,e,r){for(var o=2,n=[],a=t.slice(e,e+1);a!=r;)o+e>t.length&&error("Error","Invalid"),n.push(a),a=t.slice(e+(o-1),e+o),o+=1;return[n.length,n.join("")]},read_chrs=function(t,e,o){var n,a,s;for(s=[],n=0;o>n;n++)a=t.slice(e+(n-1),e+n),s.push(a),o-=r(a);return[s.length,s.join("")]},_unserialize=function(t,e){var r,o,n,a,s,i,u,c,l,d,m,g,w,h,f,p,v,y,$=0,b=function(t){return t};switch(e||(e=0),r=t.slice(e,e+1).toLowerCase(),o=e+2,r){case"i":b=function(t){return parseInt(t,10)},l=read_until(t,o,";"),$=l[0],c=l[1],o+=$+1;break;case"b":b=function(t){return 0!==parseInt(t,10)},l=read_until(t,o,";"),$=l[0],c=l[1],o+=$+1;break;case"d":b=function(t){return parseFloat(t)},l=read_until(t,o,";"),$=l[0],c=l[1],o+=$+1;break;case"n":c=null;break;case"s":d=read_until(t,o,":"),$=d[0],m=d[1],o+=$+2,l=read_chrs(t,o+1,parseInt(m,10)),$=l[0],c=l[1],o+=$+2,$!=parseInt(m,10)&&$!=c.length&&error("SyntaxError","String length mismatch");break;case"a":for(c={},n=read_until(t,o,":"),$=n[0],a=n[1],o+=$+2,i=parseInt(a,10),s=!0,g=0;i>g;g++)h=_unserialize(t,o),f=h[1],w=h[2],o+=f,p=_unserialize(t,o),v=p[1],y=p[2],o+=v,w!==g&&(s=!1),c[w]=y;if(s){for(u=new Array(i),g=0;i>g;g++)u[g]=c[g];c=u}o+=1;break;default:error("SyntaxError","Unknown / Unhandled data type(s): "+r)}return[r,o-e,b(c)]},_unserialize(t+"",0)[2]}!function(){"use strict";var t=angular.module("tibialotteryApp",["ui.router","ngMaterial","ngCookies","ngAnimate"]);t.config(["$mdThemingProvider",function(t){t.theme("default").primaryPalette("brown").accentPalette("grey")}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e,r){e.otherwise("/"),t.state("index",{url:"/",views:{"":{templateUrl:"/build/templates/index/index.html",controller:"IndexController",controllerAs:"indexCtrl"}}}).state("news",{url:"/news",views:{"":{template:"What's new? Haha, get it? New? Like news?"}}}).state("lottery",{url:"/lottery",views:{"":{template:"Lottery stuff"}}}).state("lotteryView",{url:"/view/:lotteryId",views:{"":{templateUrl:"/build/templates/lotteries/view.html",controller:"LotteryViewController",controllerAs:"lotteryViewCtrl"}}}).state("stats",{url:"/stats",views:{"":{template:"Statistics stuff"}}}).state("faq",{url:"/faq",views:{"":{template:"Frequently asked questions"}}}).state("contact",{url:"/contact",views:{"":{template:"Contact information"}}}).state("account",{url:"/account",views:{"":{templateUrl:"/build/templates/account/account.html",controller:"AccountController",controllerAs:"accountCtrl"}}}).state("account.login",{url:"/login",views:{"@":{templateUrl:"/build/templates/account/login.html",controller:"LoginController",controllerAs:"loginCtrl"}}}).state("account.login.reset",{url:"/reset",views:{"@":{template:"Reset password"}}}).state("account.register",{url:"/register",views:{"@":{templateUrl:"/build/templates/account/register.html",controller:"RegisterController",controllerAs:"registerCtrl"}}})}]),t.run(["$rootScope","$state","$http","$cookies",function(t,e,r,o){t.$state=e,t.$on("$stateChangeSuccess",function(){var t=o.getObject("user");t&&t.authToken?r.defaults.headers.common["auth-token"]=t.authToken:r.defaults.headers.common["auth-token"]=null})}])}(),function(){"use strict";function t(t,r,o,n,a,s,i){function u(){o.show({controller:["$scope","$mdDialog","AccountService",e],templateUrl:"/build/templates/account/partials/changePassword.html",parent:angular.element(document.body),clickOutsideToClose:!0}).then(function(t){s.changePassword(t,function(t){t=t.data;var e=n.simple().position("top right").action("OK").hideDelay(3e3);t.success?n.show(e.content("Your password has been changed successfully!")):(console.error(t),n.show(e.content("An unknown error occurred while changing your password.")))})})}function c(){var t=o.confirm().title("Are you sure you want to log out?").ok("Yes").cancel("No");o.show(t).then(function(){s.logout(function(t){return t=t.data,t.success?(a.remove("user"),void r.go("account.login")):void console.error(t)})})}var l=this;return l.lotteriesLoading=!0,l.lotteries=[],l.changePassword=u,l.logout=c,t.user=null,t.loggedIn=!1,t.noop=$.noop,t.trustAsHtml=function(t){return $sce.trustAsHtml(t)},s.getCurrentUserInformation(function(e){return e=e.data,e.success?(t.loggedIn=!0,void(t.user=e.user)):(a.remove("user"),void r.go("account.login"))}),i.getLotteriesForCurrentUser(function(t){t=t.data,t.success&&(l.lotteries=t.lotteries,l.lotteriesLoading=!1)}),l}function e(t,e,r){t.oldPassword="",t.newPassword="",t.newPasswordConfirmation="",t.errored=!1,t.passwordMatchFail=!1,t.hide=function(){e.hide()},t.cancel=function(){e.cancel()},t.change=function(){t.errored=!1,t.newPassword.length<5?(t.errored=!0,t.errorMessage="The new password must have at least 5 characters."):0===t.oldPassword.length?(t.errored=!0,t.errorMessage="You must enter your old password."):t.newPassword===t.newPasswordConfirmation?r.comparePassword(t.oldPassword,function(r){r?e.hide({newPw:t.newPassword,oldPw:t.oldPassword}):(t.errored=!0,t.errorMessage="The password you entered as your current password does not match your actual current password.")}):(t.errored=!0,t.errorMessage="The new password and confirmation do not match.")}}angular.module("tibialotteryApp").controller("AccountController",t),t.$inject=["$scope","$state","$mdDialog","$mdToast","$cookies","AccountService","LotteryService"]}(),function(){"use strict";function t(t,e,r,o,n,a,s){var i=this;i.submitting=!1,a.getCurrentUserInformation(function(t){t=t.data,t.success&&n.go("account")}),t.trustAsHtml=function(t){return r.trustAsHtml(t)},i.login=function(){return i.submitting=!0,i.error="",t.loginForm.$valid?void e({url:s.account.POST.login,method:"POST",data:t.user}).then(function(t){if(i.submitting=!1,t=t.data,t.success===!1)return void(i.error=t.message);i.error="";var e=new Date;t.user.rememberMe?e.setFullYear(e.getFullYear()+2):e.setTime(e.getTime()+72e5),o.putObject("user",t.user,{expires:e}),n.go("account")}):void(i.submitting=!1)}}angular.module("tibialotteryApp").controller("LoginController",t),t.$inject=["$scope","$http","$sce","$cookies","$state","AccountService","UrlService"]}(),function(){"use strict";function t(t,e,r,o,n){function a(){return i.submitting=!0,i.error="",t.registerForm.$valid?void e({url:"/api/v1/account/register",method:"POST",data:t.user}).then(function(t){return i.submitting=!1,t=t.data,t.success===!1?void(i.error=t.message):void(i.error="")}):void(i.submitting=!1)}function s(){t.user?(t.user.login="",t.user.name="",t.user.email=""):t.user={login:"",name:"",email:""}}var i=this;return i.submitting=!1,i.register=a,i.reset=s,n.getCurrentUserInformation(function(t){t=t.data,t.success&&o.go("account")}),t.trustAsHtml=function(t){return r.trustAsHtml(t)},i}angular.module("tibialotteryApp").controller("RegisterController",t),t.$inject=["$scope","$http","$sce","$state","AccountService"]}(),function(){"use strict";function t(t,e){var r=this;r.news=[],e.getRecent(function(e){r.news=_.map(e.data.news,function(e){return console.log(e.Contents),e.Contents=t.trustAsHtml(e.Contents),e}),console.log(r.news)})}angular.module("tibialotteryApp").controller("IndexController",t),t.$inject=["$sce","NewsService"]}(),function(){"use strict";function t(t,e){function r(){o.lotteryResultList=[];for(var t=0;t<o.lottery["Drawn Order"].length;t++)o.lotteryResultList.push({rank:t+1,ticket:o.lottery["Drawn Order"][t],player:o.listAssigned?o.lottery["List Order"][o.lottery["Drawn Order"][t]-1]||"":""})}var o=this;o.lotteryResultList=[],o.lotteryFilter="",o.loading=!0,o.listAssigned=!1,o.lottery=null,e.getLotteryById(t.lotteryId).then(function(t){o.loading=!1,t.data.success?(o.lottery=t.data.lottery,o.lottery&&(o.lottery["Creation Date"]=new Date(1e3*parseInt(o.lottery["Creation Date"])),o.lottery["Draw Time"]=new Date(1e3*parseInt(o.lottery["Draw Time"])),o.lottery["Drawn Order"]=0!==o.lottery["Drawn Order"].length?unserialize(o.lottery["Drawn Order"]):o.lottery["Drawn Order"],o.listAssigned=0!==o.lottery["List Order"].length,0!==o.lottery["Drawn Order"].length&&r())):o.lottery=null})["catch"](function(t){console.error("An error occurred:",t)})}angular.module("tibialotteryApp").controller("LotteryViewController",t),t.$inject=["$stateParams","LotteryService"]}(),function(){"use strict";function t(t,e,r){function o(){n.user=e.getObject("user"),n.loggedIn=!!n.user}var n=this;return n.loading=!1,n.loggedIn=!1,n.trustAsHtml=r.trustAsHtml,o(),t.$on("$stateChangeSuccess",o),n}angular.module("tibialotteryApp").controller("UserInfoPartialController",t);t.$inject=["$rootScope","$cookies","$sce"]}(),function(){function t(t,e,r){function o(e){t({url:r.account.GET.info,method:"GET"}).then(e)}function n(o){e.remove("user"),t({url:r.account.POST.logout,method:"POST"}).then(o)}function a(e,o){t({url:r.account.POST.passwordCompare,method:"POST",data:{password:e}}).then(function(t){o(t.data.match)})}function s(e,o){t({url:r.account.POST.changePassword,method:"POST",data:{password:e}}).then(o)}var i=this;i.getCurrentUserInformation=o,i.comparePassword=a,i.changePassword=s,i.logout=n}angular.module("tibialotteryApp").service("AccountService",t),t.$inject=["$http","$cookies","UrlService"]}(),function(){function t(t,e){function r(r){t({url:e.lottery.GET.byAccount,method:"GET"}).then(r)}function o(r){return t({url:e.lottery.GET.byID+r,method:"GET"})}var n=this;n.getLotteriesForCurrentUser=r,n.getLotteryById=o}angular.module("tibialotteryApp").service("LotteryService",t),t.$inject=["$http","UrlService"]}(),function(){function t(t,e){function r(r){t({url:e.news.GET.recent,method:"GET"}).then(r)}var o=this;o.getRecent=r}angular.module("tibialotteryApp").service("NewsService",t),t.$inject=["$http","UrlService"]}(),function(){function t(){var t=this;t.account={GET:{info:"https://xmxuxh5tdg.execute-api.us-west-2.amazonaws.com/dev/account-info"},POST:{login:"https://xmxuxh5tdg.execute-api.us-west-2.amazonaws.com/dev/account-login",logout:"https://xmxuxh5tdg.execute-api.us-west-2.amazonaws.com/dev/account-logout",changePassword:"https://xmxuxh5tdg.execute-api.us-west-2.amazonaws.com/dev/account-password-change",passwordCompare:"https://xmxuxh5tdg.execute-api.us-west-2.amazonaws.com/dev/account-password-compare"}},t.lottery={GET:{byAccount:"https://xmxuxh5tdg.execute-api.us-west-2.amazonaws.com/dev/lottery-get-by-account",byID:"https://xmxuxh5tdg.execute-api.us-west-2.amazonaws.com/dev/lottery-get-by-id/"}},t.news={GET:{recent:"https://xmxuxh5tdg.execute-api.us-west-2.amazonaws.com/dev/news-get-recent",all:""}}}angular.module("tibialotteryApp").service("UrlService",t)}(),function(){function t(){var t={bindToController:!0,controller:e,controllerAs:"tlCountdownCtrl",restrict:"E",scope:{date:"="},templateUrl:"/build/app/directives/tl-countdown/tl-countdown.html"};return t}function e(t,e){function r(){var t=(a.date-new Date)/1e3;1>t&&(a.countdownTimes=null),a.countdownTimes={};var e=3154e4;t=o(t,e,"year");var r=2628e3;t=o(t,r,"month");var s=604800;t=o(t,s,"week");var i=86400;t=o(t,i,"day");var u=3600;t=o(t,u,"hour");var c=60;t=o(t,c,"minute");var l=1;o(t,l,"second"),n("year")&&n("month")&&(a.extraClass="big",n("week")&&n("day")&&(a.extraClass="biggest"))}function o(t,e,r){if(t>e){var o=Math.floor(t/e);a.countdownTimes[r+(o>1?"s":"")]=o,t-=e*o}return t}function n(t){return void 0===a.countdownTimes[t]&&void 0===a.countdownTimes[t+"s"]}var a=this;a.countdownTimes={},a.extraClass="",t.$watch("tlCountdownCtrl.date",function(){r()}),e(function(){r()},1e3)}angular.module("tibialotteryApp").directive("tlCountdown",t),e.$inject=["$scope","$interval"]}(),function(){function t(){var t={bindToController:!0,controller:e,controllerAs:"tlTimeAgoCtrl",restrict:"E",scope:{date:"=",reverse:"="},templateUrl:"/build/app/directives/tl-time-ago/tl-time-ago.html"};return t}function e(t,e){function r(t){var e,r=!1;e=o.reverse?t-new Date:new Date-t,0>e&&(e*=-1,r=!0);for(var s=0;e>n[s];)e/=n[s],s++;return e=Math.floor(e),(r?"-":"")+e+" "+a[s]+(1!==e?"s":"")+(o.reverse?"":" ago")}var o=this,n=[1e3,60,60,24,30,12],a=["millisecond","second","minute","hour","day","month","year"];o.timeAgo="",t.$watch("tlCountdownCtrl.date",function(){o.timeAgo=r(o.date)}),e(function(){o.timeAgo=r(o.date)},3e4)}angular.module("tibialotteryApp").directive("tlTimeAgo",t),e.$inject=["$scope","$interval"]}(),function(){"use strict";function t(t){function e(e){return e?t.trustAsHtml('<i class="fa fa-check md-valid-text"></i>'):t.trustAsHtml('<i class="fa fa-times md-warn-text"></i>')}return e}angular.module("tibialotteryApp").filter("boolToCheckOrX",t),t.$inject=["$sce"]}(),function(){"use strict";function t(){function t(t){var t=1e3*parseInt(t,10),e=new Date(t);return moment(e).format("MMMM Do YYYY")}return t}angular.module("tibialotteryApp").filter("unixToPrettyDate",t)}();